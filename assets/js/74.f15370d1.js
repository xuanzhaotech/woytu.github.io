(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{657:function(t,a,s){"use strict";s.r(a);var e=s(4),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"邮箱"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#邮箱"}},[t._v("#")]),t._v(" 邮箱")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#flag"}},[t._v("flag")])]),s("li",[s("a",{attrs:{href:"#域名邮箱"}},[t._v("域名邮箱")]),s("ul",[s("li",[s("a",{attrs:{href:"#yandex配置步骤"}},[t._v("Yandex配置步骤")])])])]),s("li",[s("a",{attrs:{href:"#邮件服务器"}},[t._v("邮件服务器")]),s("ul",[s("li",[s("a",{attrs:{href:"#邮件服务器概述"}},[t._v("邮件服务器概述")])]),s("li",[s("a",{attrs:{href:"#设置域名解析"}},[t._v("设置域名解析")])]),s("li",[s("a",{attrs:{href:"#卸载-sendmail"}},[t._v("卸载sendmail")])]),s("li",[s("a",{attrs:{href:"#安装-postfix-和-dovecot"}},[t._v("安装Postfix和Dovecot")])]),s("li",[s("a",{attrs:{href:"#查看版本"}},[t._v("查看版本")])]),s("li",[s("a",{attrs:{href:"#修改邮件传输代理"}},[t._v("修改邮件传输代理")])]),s("li",[s("a",{attrs:{href:"#查看是否修改成功"}},[t._v("查看是否修改成功")])]),s("li",[s("a",{attrs:{href:"#修改-postfix-配置"}},[t._v("修改Postfix配置")])]),s("li",[s("a",{attrs:{href:"#修改-dovecot-配置"}},[t._v("修改Dovecot配置")])]),s("li",[s("a",{attrs:{href:"#修改防火墙配置"}},[t._v("修改防火墙配置")])]),s("li",[s("a",{attrs:{href:"#配置用户及权限"}},[t._v("配置用户及权限")])]),s("li",[s("a",{attrs:{href:"#启动服务"}},[t._v("启动服务")])]),s("li",[s("a",{attrs:{href:"#使用-mail-测试发信"}},[t._v("使用mail测试发信")])]),s("li",[s("a",{attrs:{href:"#使用-telnet-测试收信"}},[t._v("使用telnet测试收信")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"flag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[t._v("#")]),t._v(" flag")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/denghongcai/forsaken-mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/denghongcai/forsaken-mail"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/malaohu/forsaken-mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/malaohu/forsaken-mail"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/flashmob/go-guerrilla",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/flashmob/go-guerrilla"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.mail-tester.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("测试邮箱"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"域名邮箱"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名邮箱"}},[t._v("#")]),t._v(" 域名邮箱")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.bt.cn/bbs/thread-32749-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("宝塔邮局管理器"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.httpsmail.com/hosting",target:"_blank",rel:"noopener noreferrer"}},[t._v("httpsmail"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"yandex配置步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yandex配置步骤"}},[t._v("#")]),t._v(" Yandex配置步骤")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://hky.moe/archives/21",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hky.moe/archives/21"),s("OutboundLink")],1),t._v(" "),s("strong",[t._v("端口")])])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("SMTP")]),t._v("："),s("code",[t._v("smtp.yandex.com:465 SSL")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("IMAP")]),t._v("："),s("code",[t._v("imap.yandex.com:993 SSL")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("POP3")]),t._v("："),s("code",[t._v("pop.yandex.com:995 SSL")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("注意：如果是添加第二个域名（一个域名是一个组织），进入"),s("a",{attrs:{href:"https://connect.yandex.com/portal/admin",target:"_blank",rel:"noopener noreferrer"}},[t._v("账户管理页面"),s("OutboundLink")],1),t._v("，\n然后点击顶部的域名后弹出下拉菜单有一个"),s("code",[t._v("New organization")]),t._v("按钮来添加新域名，然后按照步骤（跳过1、2）操作即可")])]),t._v(" "),s("ul",[s("li",[t._v("1、注册账户")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://mail.yandex.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mail.yandex.com"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("2、添加域名")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://connect.yandex.com/pdd",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://connect.yandex.com/pdd/"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("3、验证域名所有权")])]),t._v(" "),s("blockquote",[s("p",[t._v("此时已经进入到管理页面，在左侧菜单"),s("code",[t._v("Domains")]),t._v("中点击域名（此时域名右侧是"),s("code",[t._v("禁止符号")]),t._v("）验证域名所有权，\n验证成功后左侧菜单栏会多出几个菜单（这时域名右侧是"),s("code",[t._v("感叹号")]),t._v("）")])]),t._v(" "),s("ul",[s("li",[t._v("4、DNS配置"),s("code",[t._v("SPF Record")]),t._v("、"),s("code",[t._v("MX")]),t._v("、二级域名")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://connect.yandex.com/portal/admin/customization/dns",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://connect.yandex.com/portal/admin/customization/dns"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("按照上面链接中的DNS配置（或者点击左侧菜单栏"),s("code",[t._v("DNS management")]),t._v("）到自己域名所在服务商添加DNS解析，\n注意末尾的点不要丢了，等待几分钟刷新（域名右侧是"),s("code",[t._v("绿色的勾")]),t._v("）")])]),t._v(" "),s("ul",[s("li",[t._v("5、DNS配置"),s("code",[t._v("DKIM signature")])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://connect.yandex.com/portal/admin/customization/mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://connect.yandex.com/portal/admin/customization/mail"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("点击上面的连接（就是左侧"),s("code",[t._v("Email")]),t._v("菜单）进入界面后点击"),s("code",[t._v("DKIM signatures")]),t._v("点击"),s("code",[t._v("Copy")]),t._v(",然后在域名所在服务商添加一条TXT记录DNS解析，\n主机记录（name）为"),s("code",[t._v("mail._domainkey")]),t._v(",值就是刚刚复制的"),s("code",[t._v("DKIM signatures")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/YandexMailDNS.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("6、添加邮箱账户")])]),t._v(" "),s("blockquote",[s("p",[t._v("点击 "),s("code",[t._v("Все сотрудники")]),t._v("（就是左侧第一个菜单），然后点击页面下方有一个带"),s("code",[t._v("+")]),t._v("的"),s("code",[t._v("add")]),t._v("按钮，\n再点击"),s("code",[t._v("Add a person")]),t._v("，在弹出的页面输入，带"),s("code",[t._v("*")]),t._v("的为必填，填完后就点击"),s("code",[t._v("橙色的add按钮")])])]),t._v(" "),s("ul",[s("li",[t._v("7、新添加的账户需要去登录并同意一个协议才能使用")])]),t._v(" "),s("blockquote",[s("p",[t._v("点击"),s("a",{attrs:{href:"https://mail.yandex.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mail.yandex.com"),s("OutboundLink")],1),t._v("登录新账户并点击"),s("code",[t._v("Complete registration")]),t._v("按钮同意协议")])]),t._v(" "),s("ul",[s("li",[t._v("8、pop3无法使用的解决办法")])]),t._v(" "),s("blockquote",[s("p",[t._v("点击"),s("a",{attrs:{href:"https://mail.yandex.com/#setup/client",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mail.yandex.com/#setup/client"),s("OutboundLink")],1),t._v("\n登陆邮箱按照下图中步骤操作即可，登录后重新点击链接可省略下图中的1、2、3步")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/Yandex%E8%A7%A3%E5%86%B3POP3%E6%97%A0%E6%B3%95%E6%94%B6%E5%8F%96%E9%82%AE%E4%BB%B6.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("9、域名验证不通过解决办法")])]),t._v(" "),s("blockquote",[s("p",[t._v("进入"),s("a",{attrs:{href:"https://webmaster.yandex.com/sites",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webmaster.yandex.com/sites"),s("OutboundLink")],1),t._v("点击没有通过验证域名上的"),s("code",[t._v("X")]),t._v("按钮进行删除，\n然后点击页面顶部的"),s("code",[t._v("+")]),t._v("按钮重新添加域名再验证。")])]),t._v(" "),s("blockquote",[s("p",[t._v("我的域名验证不通过发现是因为：添加不带"),s("code",[t._v("www")]),t._v("的域名，自动添加了"),s("code",[t._v("www")]),t._v("二级域名")])]),t._v(" "),s("h2",{attrs:{id:"邮件服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#邮件服务器"}},[t._v("#")]),t._v(" 邮件服务器")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://tourcoder.com/install-postfix-on-centos-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://tourcoder.com/install-postfix-on-centos-7/"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"邮件服务器概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#邮件服务器概述"}},[t._v("#")]),t._v(" 邮件服务器概述")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("MUA")]),t._v("："),s("code",[t._v("Mail User Agent")]),t._v("，邮件用户代理")])]),t._v(" "),s("blockquote",[s("p",[t._v("接收邮件所使用的邮件客户端，使用"),s("code",[t._v("IMAP")]),t._v("或"),s("code",[t._v("POP3")]),t._v("协议与服务器通信；")]),t._v(" "),s("p",[t._v("如："),s("code",[t._v("Outlook")]),t._v("、"),s("code",[t._v("Foxmail")]),t._v("、"),s("code",[t._v("thunderbird")]),t._v("、"),s("code",[t._v("Mac Mail")]),t._v("、"),s("code",[t._v("mutt")])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("MTA")]),t._v("："),s("code",[t._v("Mail Transfer Agent")]),t._v("，邮件传输代理代为传递")])]),t._v(" "),s("blockquote",[s("p",[t._v("通过"),s("code",[t._v("SMTP")]),t._v("协议发送、转发邮件；")]),t._v(" "),s("p",[t._v("如："),s("code",[t._v("Sendmail")]),t._v("、"),s("code",[t._v("Postfix")])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("MDA")]),t._v("："),s("code",[t._v("Mail Delivery Agent")]),t._v("，邮件投递代理")])]),t._v(" "),s("blockquote",[s("p",[t._v("将"),s("code",[t._v("MTA")]),t._v("接收到的邮件保存到磁盘或指定地方，通常会进行垃圾邮件及病毒扫描；")]),t._v(" "),s("p",[t._v("如："),s("code",[t._v("procmail")]),t._v("、"),s("code",[t._v("dropmail")])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("MRA")]),t._v("："),s("code",[t._v("Mail Receive Agent")]),t._v("，邮件接收代理")])]),t._v(" "),s("blockquote",[s("p",[t._v("负责实现"),s("code",[t._v("IMAP")]),t._v("与"),s("code",[t._v("POP")]),t._v("3协议，与"),s("code",[t._v("MUA")]),t._v("进行交互；")]),t._v(" "),s("p",[t._v("如："),s("code",[t._v("dovecot")])])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("SMTP")]),t._v("："),s("code",[t._v("Simple Mail Transfer Protocol")]),t._v("，传输发送邮件所使用的标准协议；")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("IMAP")]),t._v("："),s("code",[t._v("Internet Message Access Protocol")]),t._v("，接收邮件使用的标准协议之一；")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("POP3")]),t._v("："),s("code",[t._v("Post Office Protocol 3")]),t._v("，接收邮件使用的标准协议之一。")])])]),t._v(" "),s("p",[s("strong",[t._v("流程")])]),t._v(" "),s("blockquote",[s("p",[t._v("邮件服务器基本都有"),s("code",[t._v("MTA")]),t._v("，"),s("code",[t._v("MDA")]),t._v("，"),s("code",[t._v("MRA")]),t._v("组成")])]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("MUA")]),t._v("(发件人发送) --\x3e (若干个)"),s("code",[t._v("MTA")]),t._v(" --\x3e "),s("code",[t._v("MDA")]),t._v(" --\x3e "),s("code",[t._v("MRA")]),t._v(" <–- "),s("code",[t._v("MUA")]),t._v("(收件人收取)")])]),t._v(" "),s("blockquote",[s("p",[t._v("协议："),s("code",[t._v("MUA")]),t._v("到"),s("code",[t._v("MTA")]),t._v("，以及"),s("code",[t._v("MTA")]),t._v("到"),s("code",[t._v("MTA")]),t._v("之间使用"),s("code",[t._v("SMTP")]),t._v("协议，而收邮件时，"),s("code",[t._v("MUA")]),t._v("到"),s("code",[t._v("MDA")]),t._v("之间使用"),s("code",[t._v("POP3")]),t._v("或"),s("code",[t._v("IMAP")]),t._v("协议。")])]),t._v(" "),s("ul",[s("li",[t._v("一、用户利用"),s("code",[t._v("MUA")]),t._v("寄信到"),s("code",[t._v("MTA")]),t._v("。配置"),s("code",[t._v("MUA")]),t._v("时要配上"),s("code",[t._v("SMTP")]),t._v("服务器域名,然后发送邮件。")])]),t._v(" "),s("blockquote",[s("p",[t._v("比如使用网易账户发送邮件就要在配置"),s("code",[t._v("smtp.163.com")]),t._v(",这样邮件就发送到网易"),s("code",[t._v("MTA")]),t._v("。")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("二、 "),s("code",[t._v("MTA")]),t._v("检查收件人服务器如果不是自己则传递到下一跳"),s("code",[t._v("MTA")]),t._v("，直到传递到目的"),s("code",[t._v("MTA")]),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("三、 目的"),s("code",[t._v("MTA")]),t._v("收到邮件后将邮件存储到"),s("code",[t._v("MDA")]),t._v("中，"),s("code",[t._v("MDA")]),t._v("对邮件进行垃圾过滤，病毒查杀。")])]),t._v(" "),s("li",[s("p",[t._v("四、 "),s("code",[t._v("MRA")]),t._v("把邮件从"),s("code",[t._v("MDA")]),t._v("收取到用户的收件箱中。")])]),t._v(" "),s("li",[s("p",[t._v("五、 "),s("code",[t._v("MUA")]),t._v("收取邮件，此时收取邮件只是将"),s("code",[t._v("MRA")]),t._v("中的邮件下载到本地。")])])]),t._v(" "),s("h3",{attrs:{id:"设置域名解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置域名解析"}},[t._v("#")]),t._v(" 设置域名解析")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("记录类型")]),t._v(" "),s("th",[t._v("主机记录")]),t._v(" "),s("th",[t._v("解析线路(isp)")]),t._v(" "),s("th",[t._v("记录值")]),t._v(" "),s("th",[t._v("MX优先级")]),t._v(" "),s("th",[t._v("TTL值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("A")]),t._v(" "),s("td",[t._v("mail")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("服务器IP地址")]),t._v(" "),s("td",[t._v("–")]),t._v(" "),s("td",[t._v("10 分钟")])]),t._v(" "),s("tr",[s("td",[t._v("MX")]),t._v(" "),s("td",[t._v("@")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("mail.域名")]),t._v(" "),s("td",[t._v("10")]),t._v(" "),s("td",[t._v("10 分钟")])])])]),t._v(" "),s("h3",{attrs:{id:"卸载sendmail"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载sendmail"}},[t._v("#")]),t._v(" 卸载"),s("code",[t._v("sendmail")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("yum remove -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendmail")]),t._v("\n")])])]),s("h3",{attrs:{id:"安装postfix和dovecot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装postfix和dovecot"}},[t._v("#")]),t._v(" 安装"),s("code",[t._v("Postfix")]),t._v("和"),s("code",[t._v("Dovecot")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y postfix dovecot\n")])])]),s("h3",{attrs:{id:"查看版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看版本"}},[t._v("#")]),t._v(" 查看版本")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postfix\\|dovecot"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -e postfix -e dovecot\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -E "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postfix|dovecot"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("egrep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postfix|dovecot"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/postfix|dovecot/"')]),t._v("\n")])])]),s("h3",{attrs:{id:"修改邮件传输代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改邮件传输代理"}},[t._v("#")]),t._v(" 修改邮件传输代理")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("alternatives --config mta\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者先查看邮件传输代理程序，再设置")]),t._v("\n/usr/sbin/alternatives --set mta /usr/sbin/sendmail.postfix\n")])])]),s("blockquote",[s("p",[t._v("会提示找到几个可用程序，输入自己需要的那个程序的数字即可")])]),t._v(" "),s("h3",{attrs:{id:"查看是否修改成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看是否修改成功"}},[t._v("#")]),t._v(" 查看是否修改成功")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("alternatives --display mta\n")])])]),s("blockquote",[s("p",[t._v("第一行显示"),s("code",[t._v("mta - status is manual.")]),t._v("则表示设置成功")])]),t._v(" "),s("h3",{attrs:{id:"修改postfix配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改postfix配置"}},[t._v("#")]),t._v(" 修改"),s("code",[t._v("Postfix")]),t._v("配置")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://blog.leanote.com/post/colin_xia@yeah.net/postfix-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E7%AC%94%E8%AE%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://blog.leanote.com/post/colin_xia@yeah.net/postfix-官方文档笔记"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.cnblogs.com/operationhome/p/9056870.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/operationhome/p/9056870.html"),s("OutboundLink")],1)])]),t._v(" "),s("blockquote",[s("p",[t._v("在"),s("code",[t._v("main.cf")]),t._v("中配置的值会自动分散到多个指定的配置文件中去")])]),t._v(" "),s("p",[s("strong",[t._v("查看配置")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出所有postfix配置项以及默认值")]),t._v("\npostconf\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不输出#开头和空行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -v "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'^#\\|^$'")]),t._v(" /etc/postfix/main.cf\n")])])]),s("p",[s("strong",[t._v("编辑配置")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/postfix/main.cf\n")])])]),s("p",[s("strong",[t._v("修改以下内容")])]),t._v(" "),s("div",{staticClass:"language-vim extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vim"}},[s("code",[t._v("# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("主机名\nmyhostname "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("com")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("83")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("设置本地网络的邮件域\nmydomain "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" example"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("com")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("要外发邮件时发件人的邮件域名，这里取的mydomain变量值\nmyorigin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $mydomain\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("116")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("默认是localhost，修改成"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v("，即监听所有网络接口\ninet_interfaces "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("119")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("网络协议 ipv6、ipv4或者"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v("\ninet_protocols "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("164")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("设置可接收邮件的主机名或域名，来自其他主机名或域名的邮件将拒绝接收\nmydestination "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $myhostname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("$mydomain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $mydomain\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("210")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("制定接收邮件的规则，可以是hash文件，可以直接注释\nlocal_recipient_maps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("264")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("收发客户端的地址\nmynetworks "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("296")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("设置可转发来自哪些域名或主机名的邮件\nrelay_domains "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $mydestination\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("419")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("邮件存储的位置\nhome_mailbox "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Maildir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n# "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("572")]),t._v("行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("指定MUA通过smtp连接postfix时返回的header头信息，定义欢迎信息\nsmtpd_banner "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $myhostname ESMTP $mail_name\n")])])]),s("p",[s("strong",[t._v("在文件结尾加入")])]),t._v(" "),s("div",{staticClass:"language-vim extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vim"}},[s("code",[t._v("# 启用SMTP认证\nsmtpd_sasl_type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dovecot\n# \nsmtpd_sasl_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("spool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("postfix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("private"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("auth\n# 指定postfix使用sasl验证：就是启用smtp并要求进行账号、密码效验\nsmtpd_sasl_auth_enable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" yes\n# 指定SMTP认证的本地域名：可以使用"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("或注释掉，默认为空\nsmtpd_sasl_local_domain "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $myhostname\n# 支持非标准验证规定的行为，\n# 指定postfix兼容MUA使用不规则的smtp协议，主要针对老版本的outlook\nbroken_sasl_auth_clients "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" yes\n# 当客户端引发错误时"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("postfix的初始等待时间 \nsmtpd_error_sleep_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0s\n# 收件人限制条件\nsmtpd_recipient_restrictions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" permit_mynetworks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("permit_sasl_authenticated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject_unauth_destination"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject_unknown_sender_domain\n# 客户端限制\nsmtpd_client_restrictions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" permit_sasl_authenticated\n# 取消smtp的匿名登录\nsmtpd_sasl_security_options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" noanonymous\n# \nproxy_read_maps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $local_recipient_maps $mydestination $virtual_alias_maps $virtual_alias_domains $virtual_mailbox_maps $virtual_mailbox_domains $relay_recipient_maps $relay_domains $canonical_maps $sender_canonical_maps $recipient_canonical_maps $relocated_maps $transport_maps $mynetworks\n# 指定通过postfix发送邮件的体积大小，此处表示5M\nmessage_size_limit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5242880")]),t._v("\n")])])]),s("blockquote",[s("p",[s("code",[t._v("smtpd_recipient_restrictions")]),t._v("（收件人限制）有以下可用值：")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("permit_mynetworks")]),t._v("允许本地的网络接收")]),t._v(" "),s("p",[s("code",[t._v("permit_sasl_authenticated")]),t._v("允许通过"),s("code",[t._v("SASL")]),t._v("验证的用户（也就是"),s("code",[t._v("smtp")]),t._v("链接时通过了账号、密码效验的用户）的所有用户")]),t._v(" "),s("p",[s("code",[t._v("reject_unauth_destination")]),t._v("拒绝无法认证的目的地")])])]),t._v(" "),s("h3",{attrs:{id:"修改dovecot配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改dovecot配置"}},[t._v("#")]),t._v(" 修改"),s("code",[t._v("Dovecot")]),t._v("配置")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/dovecot/dovecot.conf\n")])])]),s("div",{staticClass:"language-vim extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vim"}},[s("code",[t._v("auth_mechanisms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" plain login\nbase_dir "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\ndebug_log_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot_debug"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("log\ndisable_plaintext_auth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" no\nfirst_valid_uid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\ninfo_log_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot_info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("log\nlogin_trusted_networks "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nmail_location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mbox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("INBOX"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("u")]),t._v("\nmbox_write_locks "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fcntl\nnamespace inbox "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  inbox "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" yes\n  location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mbox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("INBOX"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("u")]),t._v("\n  mailbox Drafts "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    special_use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\Drafts\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  mailbox Junk "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    special_use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\Junk\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  mailbox Sent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    special_use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\Sent\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  mailbox "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sent Messages"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    special_use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\Sent\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  mailbox Trash "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    special_use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\Trash\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  prefix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\npassdb "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("args")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dovecot\n  driver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pam\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nservice auth "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  unix_listener "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("spool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("postfix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("private"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("auth "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0666")]),t._v("\n    user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" postfix\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  unix_listener auth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("userdb "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    group "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" noreply\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0666")]),t._v("\n    user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" noreply\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nservice imap"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("login "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("inet_listener imap "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("143")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nservice pop3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("login "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  inet_listener pop3 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("110")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ssl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" no\nssl_cert "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pki"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("certs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("pem\nssl_key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pki"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("private"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dovecot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("pem\nuserdb "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  driver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" passwd\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("其实上面的配置文件并非一个，而是修改了"),s("code",[t._v("/etc/dovecot/conf.d")]),t._v("文件夹下的以下几个文件")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("10-auth.conf")])]),t._v(" "),s("p",[s("code",[t._v("10-ssl.conf")])]),t._v(" "),s("p",[s("code",[t._v("10-mail.conf")])]),t._v(" "),s("p",[s("code",[t._v("10-master.conf")])]),t._v(" "),s("p",[s("code",[t._v("10-logging.conf")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("修改完成以后使用"),s("code",[t._v("doveconf -n > dovecot-new.conf")]),t._v("命令生成一个全新的综合的配置文件。")])]),t._v(" "),s("h3",{attrs:{id:"修改防火墙配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改防火墙配置"}},[t._v("#")]),t._v(" 修改防火墙配置")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("firewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --permanent --add-service"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("imap\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --permanent --add-service"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("smtp\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --permanent --add-service"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pop3\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("/tcp --permanent\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("/udp --permanent\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("110")]),t._v("/tcp --permanent\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("110")]),t._v("/udp --permanent\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("143")]),t._v("/tcp --permanent\nfirewall-cmd --zone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("143")]),t._v("/udp --permanent\nfirewall-cmd --reload\n")])])]),s("h3",{attrs:{id:"配置用户及权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置用户及权限"}},[t._v("#")]),t._v(" 配置用户及权限")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" 用户名\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置密码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"密码"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" --stdin 用户名\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 授权")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 0775 /var/spool/mail/*\n")])])]),s("h3",{attrs:{id:"启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[t._v("#")]),t._v(" 启动服务")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启postfix服务")]),t._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" postfix\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置postfix开机启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chkconfig")]),t._v(" postfix on\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启dovecot服务")]),t._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" dovecot\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置dovecot开机启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chkconfig")]),t._v(" dovecot on\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启postfix/dovecot")]),t._v("\nsystemctl restart postfix/dovecot\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看postfix/dovecot状态")]),t._v("\nsystemctl status postfix/dovecot\n")])])]),s("h3",{attrs:{id:"使用mail测试发信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用mail测试发信"}},[t._v("#")]),t._v(" 使用"),s("code",[t._v("mail")]),t._v("测试发信")]),t._v(" "),s("blockquote",[s("p",[t._v("未做明确配置时，"),s("code",[t._v("mail")]),t._v("默认将本机作为发信、收信的服务器，所以此步骤中的测试操作在邮件服务器本机完成。")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"邮件内容"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" mail -s "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"邮件主题"')]),t._v(" -r 发送人邮件地址 接收人邮件地址\n")])])]),s("h3",{attrs:{id:"使用telnet测试收信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用telnet测试收信"}},[t._v("#")]),t._v(" 使用"),s("code",[t._v("telnet")]),t._v("测试收信")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y telnet\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("telnet 域名 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);