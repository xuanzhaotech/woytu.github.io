(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{652:function(t,s,e){"use strict";e.r(s);var a=e(4),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"linux操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux操作"}},[t._v("#")]),t._v(" Linux操作")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#flag"}},[t._v("flag")])]),e("li",[e("a",{attrs:{href:"#重装系统"}},[t._v("重装系统")]),e("ul",[e("li",[e("a",{attrs:{href:"#meowlove"}},[t._v("MeowLove")])]),e("li",[e("a",{attrs:{href:"#moeclub"}},[t._v("moeclub")])])])]),e("li",[e("a",{attrs:{href:"#后台运行"}},[t._v("后台运行")]),e("ul",[e("li",[e("a",{attrs:{href:"#tmux"}},[t._v("Tmux")])]),e("li",[e("a",{attrs:{href:"#screen"}},[t._v("Screen")])]),e("li",[e("a",{attrs:{href:"#nohup"}},[t._v("nohup")])]),e("li",[e("a",{attrs:{href:"#setsid"}},[t._v("setsid")])]),e("li",[e("a",{attrs:{href:"#supervisor"}},[t._v("supervisor")])])])]),e("li",[e("a",{attrs:{href:"#传输文件"}},[t._v("传输文件")]),e("ul",[e("li",[e("a",{attrs:{href:"#scp"}},[t._v("scp")])]),e("li",[e("a",{attrs:{href:"#rsync"}},[t._v("rsync")])])])]),e("li",[e("a",{attrs:{href:"#性能测试"}},[t._v("性能测试")])]),e("li",[e("a",{attrs:{href:"#网卡"}},[t._v("网卡")]),e("ul",[e("li",[e("a",{attrs:{href:"#mtu"}},[t._v("MTU")])])])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"flag"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[t._v("#")]),t._v(" flag")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://learn-linux.readthedocs.io/zh_CN/latest",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux手册"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"http://www.linuxbaike.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.linuxbaike.com"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://network.fasionchan.com/zh_CN/latest/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux网络编程"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://osx-guide.readthedocs.io/zh_CN/latest",target:"_blank",rel:"noopener noreferrer"}},[t._v("OSX操作指南"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/guodongxiaren/LinuxTool",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/guodongxiaren/LinuxTool"),e("OutboundLink")],1)])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://lamp.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://lamp.sh"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://oneinstack.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://oneinstack.com"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://lnmp.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://lnmp.org"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.moerats.com/archives/625",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云CentOS 7系统一键净化脚本"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("strong",[t._v("编辑器")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://c.biancheng.net/vi",target:"_blank",rel:"noopener noreferrer"}},[t._v("vi命令（vi编辑器）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://wiki.jikexueyuan.com/project/unix/the-vi-editor.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("vi 编辑器使用向导"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://wsgzao.github.io/post/vim",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vim 从小白到入门"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://vimjc.com/archives",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vimjc.com/archives"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("strong",[t._v("监控工具")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://learn-linux.readthedocs.io/zh_CN/latest/maintenance/monitor/tools/80-linux-monitoring-tools.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux工程师必备的88个监控工具"),e("OutboundLink")],1)])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("nethogs")]),t._v(": 按进程查看流量占用")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("ethtool")]),t._v(": 诊断工具")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tcpdump")]),t._v(": 抓包工具")])]),t._v(" "),e("li",[e("p",[t._v("监控总体带宽使用："),e("code",[t._v("nload")]),t._v("、"),e("code",[t._v("bmon")]),t._v("、"),e("code",[t._v("slurm")]),t._v("、"),e("code",[t._v("bwm-ng")]),t._v("、"),e("code",[t._v("cbm")]),t._v("、"),e("code",[t._v("speedometer")]),t._v("、"),e("code",[t._v("netload")])])]),t._v(" "),e("li",[e("p",[t._v("监控总体带宽使用（批量式输出）："),e("code",[t._v("vnstat")]),t._v("、"),e("code",[t._v("ifstat")]),t._v("、"),e("code",[t._v("dstat")]),t._v("、"),e("code",[t._v("collectl")])])]),t._v(" "),e("li",[e("p",[t._v("每个套接字连接的带宽使用："),e("code",[t._v("iftop")]),t._v("、"),e("code",[t._v("iptraf")]),t._v("、"),e("code",[t._v("tcptrack")]),t._v("、"),e("code",[t._v("pktstat")]),t._v("、"),e("code",[t._v("netwatch")]),t._v("、"),e("code",[t._v("trafshow")]),t._v("、"),e("code",[t._v("jnettop")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("ntopng")])])])]),t._v(" "),e("h2",{attrs:{id:"重装系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重装系统"}},[t._v("#")]),t._v(" 重装系统")]),t._v(" "),e("h3",{attrs:{id:"meowlove"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#meowlove"}},[t._v("#")]),t._v(" MeowLove")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/MeowLove/Network-Reinstall-System-Modify",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/MeowLove/Network-Reinstall-System-Modify"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("yum update\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y xz openssl "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("gawk")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载脚本")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" --no-check-certificate "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://raw.githubusercontent.com/MeowLove/Network-Reinstall-System-Modify/master/Network-Reinstall-System-Modify.sh'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给脚本授权")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" a+x Network-Reinstall-System-Modify.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一键网络重装纯净CentOS 7")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" Network-Reinstall-System-Modify.sh -CentOS_7\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一键网络重装纯净Windows Server 2019")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" Network-Reinstall-System-Modify.sh -Windows_Server_2019\n")])])]),e("ul",[e("li",[t._v("下载SHELL脚本（通过root用户运行）")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" --no-check-certificate -qO ~/Network-Reinstall-System-Modify.sh "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.cxthhhhh.com/tech-tools/Network-Reinstall-System-Modify/Network-Reinstall-System-Modify.sh'")]),t._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" a+x ~/Network-Reinstall-System-Modify.sh\n")])])]),e("ul",[e("li",[t._v("安装Linux系统")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ①. 一键网络重装纯净CentOS 7（推荐）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -CentOS_7\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ②. 一键网络重装纯净CentOS 6")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -CentOS_6\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ③. 一键网络重装纯净Debian 10（推荐）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Debian_10\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ④. 一键网络重装纯净Debian 9")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Debian_9\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ⑤. 一键网络重装纯净Debian 8")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Debian_8\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ⑥. 一键网络重装纯净Ubuntu 18.04（推荐）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Ubuntu_18.04\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ⑦. 一键网络重装纯净Ubuntu 16.04")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Ubuntu_16.04\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ⑧. 一键网络重装纯净Ubuntu 14.04")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Ubuntu_14.04\n")])])]),e("ul",[e("li",[t._v("安装Windows系统")])]),t._v(" "),e("blockquote",[e("p",[t._v("警告：你需要购买来自Microsoft或其合作伙伴正版系统授权并激活系统使用。继续安装即代表您知悉并已经购买正版授权。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ①. 一键网络重装纯净Windows Server 2019（推荐）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Windows_Server_2019\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ②. 一键网络重装纯净Windows Server 2016")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Windows_Server_2016\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ③. 一键网络重装纯净Windows Server 2012 R2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Windows_Server_2012R2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ④. 一键网络重装纯净Windows Server 2008 R2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Windows_Server_2008R2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ⑤. 一键网络重装纯净Windows 7 Vienna")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Windows_7_Vienna\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ⑥. 一键网络重装纯净Windows Server 2003")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -Windows_Server_2003\n")])])]),e("ul",[e("li",[t._v("安装裸机系统部署平台")])]),t._v(" "),e("blockquote",[e("p",[t._v("仅适用于高端用户，手动安装任意系统。可通过网络ISO或iPXE安装任意系统。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -CXT_Bare-metal_System_Deployment_Platform\n")])])]),e("ul",[e("li",[t._v("安装DD系统")])]),t._v(" "),e("blockquote",[e("p",[t._v("如果您不了解这意味着什么，请不要进行操作。%ULR%应该替换为您自己的映像地址。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ~/Network-Reinstall-System-Modify.sh -DD "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%URL%"')]),t._v("\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" --no-check-certificate -qO- "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zhujiwiki.com/wp-content/uploads/2018/04/InstallNET.sh'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -dd "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://hao.zhujiwiki.com/dd/CentOS_7.X_NetInstallation.vhd.gz'")]),t._v("\n")])])]),e("h3",{attrs:{id:"moeclub"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#moeclub"}},[t._v("#")]),t._v(" moeclub")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://moeclub.org/2018/04/03/603",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://moeclub.org/2018/04/03/603/"),e("OutboundLink")],1)])]),t._v(" "),e("blockquote",[e("p",[t._v("适用于由GRUB引导的CentOS,Ubuntu,Debian系统")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("yum update\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y xz openssl "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("gawk")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载脚本")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" --no-check-certificate "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://moeclub.org/attachment/LinuxShell/InstallNET.sh'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给脚本授权")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" a+x InstallNET.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一键网络重装纯净CentOS 7")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" InstallNET.sh -c "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.6")]),t._v(".1810 -v "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(" -a --mirror "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://mirror.centos.org/centos'")]),t._v("\n")])])]),e("h2",{attrs:{id:"后台运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后台运行"}},[t._v("#")]),t._v(" 后台运行")]),t._v(" "),e("h3",{attrs:{id:"tmux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tmux"}},[t._v("#")]),t._v(" Tmux")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("tmux")]),t._v("是一款"),e("code",[t._v("Linux")]),t._v("下的终端复用工具，可以开启不同的终端窗口来将应用程序作为后台守护进程执行，即使远程连接的SSH断开也不会影响程序的执行。")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/tmux/tmux",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/tmux/tmux"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/10/tmux.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.ruanyifeng.com/blog/2019/10/tmux.html"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://louiszhai.github.io/2017/09/30/tmux",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://louiszhai.github.io/2017/09/30/tmux"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://gist.github.com/MohamedAlaa/2961058",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/MohamedAlaa/2961058"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://gist.github.com/ryerh/14b7c24dfd623ef8edc7",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/ryerh/14b7c24dfd623ef8edc7"),e("OutboundLink")],1)])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("tmux")]),t._v("分为"),e("code",[t._v("3")]),t._v("层，"),e("code",[t._v("Session")]),t._v("包含"),e("code",[t._v("Window")]),t._v("包含"),e("code",[t._v("Panes")])])]),t._v(" "),e("p",[e("strong",[t._v("命令")])]),t._v(" "),e("blockquote",[e("p",[t._v("可在命令后加"),e("code",[t._v("--h")]),t._v("查看命令帮助，如："),e("code",[t._v("tmux new --h")])])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("yum install -y tmux")]),t._v(" 安装")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux new -s 会话名称")]),t._v(" 新建会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux attach -t 会话名称")]),t._v(" 可进入到已经创建的会话")])])]),t._v(" "),e("blockquote",[e("p",[t._v("可使用"),e("code",[t._v("attach")]),t._v("前一部分字母，如"),e("code",[t._v("tmux a -t 会话名称")])])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("tmux ls")]),t._v(" 列出所有会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux switch -t 会话名或会话编号")]),t._v(" 切换会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux rename-session -t 会话名或会话编号 新会话名")]),t._v(" 重命名会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux kill-session -t 会话名称")]),t._v(" 关闭会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux kill-server")]),t._v(" 关闭所有会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux split-pane -h")]),t._v(" 左右分屏")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("tmux spilt-pane -v")]),t._v(" 上下分屏")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("swap-window -s 3 -t 1")]),t._v("  交换 3 号和 1 号窗口")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("swap-window -t 1")]),t._v(" 交换当前和 1 号窗口")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("move-window -t 1")]),t._v(" 移动当前窗口到 1 号")])]),t._v(" "),e("li",[e("p",[e("code",[t._v('tmux new -s 会话名 -d "命令"')]),t._v(" 创建新会话并在后台执行命令")])]),t._v(" "),e("li",[e("p",[e("code",[t._v('tmux neww -n 窗口名 -d "命令"')]),t._v(" 新建窗口名并在后台执行命令")])])]),t._v(" "),e("p",[e("strong",[t._v("快捷键")])]),t._v(" "),e("blockquote",[e("p",[t._v("所有的快捷键都是先按一下"),e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("B")]),t._v("松开，这时快捷键生效再按其他按键")])]),t._v(" "),e("ul",[e("li",[e("p",[e("kbd",[t._v("D")]),t._v(" 快捷键可以退出当前终端窗口")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v("S")]),t._v(" 列出所有会话，此时可通过方向键和回车键切换")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v("$")]),t._v(" 重命名当前会话")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v("%")]),t._v(" 左右分屏")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v('"')]),t._v(" 上下分屏")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v(":")]),t._v(" 进入"),e("code",[t._v("tmux")]),t._v("命令行")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v(":new -s 会话名称")]),t._v(" 创建并进入新的会话（不存在父子级关系）")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v(":kill-session")]),t._v(" 删除当前会话")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v(":kill-server")]),t._v(" 删除所有会话")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v("[")]),t._v("或"),e("kbd",[t._v("PgUp")]),t._v(" 进入"),e("code",[t._v("copy mode")]),t._v("，查看"),e("code",[t._v("tmux")]),t._v("中的终端输出记录")])])]),t._v(" "),e("blockquote",[e("p",[t._v("用"),e("kbd",[t._v("PgUp")]),t._v("、"),e("kbd",[t._v("PgDn")]),t._v("、"),e("code",[t._v("光标")]),t._v(" 浏览历史输出了，按"),e("kbd",[t._v("q")]),t._v("退出")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("copy mode")]),t._v("其实比较类似于"),e("code",[t._v("vi")]),t._v("/"),e("code",[t._v("emacs")]),t._v("里面一个只读"),e("code",[t._v("buffer")]),t._v("，可以移动光标，可以搜索，用C-SPC开始选择，选择完后用\n"),e("kbd",[t._v("M")]),t._v(" + "),e("kbd",[t._v("w")]),t._v("拷贝(会自动退出"),e("code",[t._v("copy mode")]),t._v(")，"),e("kbd",[t._v("]")]),t._v("可以粘贴, "),e("kbd",[t._v("=")]),t._v("从剪贴板历史中选择。")])]),t._v(" "),e("p",[e("strong",[t._v("开机运行")])]),t._v(" "),e("blockquote",[e("p",[t._v("在"),e("code",[t._v("vi /etc/rc.local")]),t._v("文件中按"),e("kbd",[t._v("Shift")]),t._v(" + "),e("kbd",[t._v("g")]),t._v("（就是大写的G）跳转到末尾添加命令")])]),t._v(" "),e("blockquote",[e("p",[t._v("如果进入"),e("code",[t._v("tmux")]),t._v("时进行和"),e("code",[t._v("home")]),t._v("相关的操作时提示"),e("code",[t._v("$HOME")]),t._v("未设定，加入设置"),e("code",[t._v("home")]),t._v("目录命令："),e("code",[t._v("export HOME=/home")])])]),t._v(" "),e("blockquote",[e("p",[t._v("为防止启动执行失败，最好执行一次"),e("code",[t._v("chmod +x /etc/rc.d/rc.local")]),t._v("进行授权")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建新会话并在后台执行命令")]),t._v("\ntmux new -s 会话名 -d "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"命令"')]),t._v("\n\ntmux new -s 会话名 -d "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"命令"')]),t._v("\n")])])]),e("h3",{attrs:{id:"screen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#screen"}},[t._v("#")]),t._v(" Screen")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("Screen")]),t._v("是一款由"),e("code",[t._v("GNU")]),t._v("计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。\n"),e("code",[t._v("GNU Screen")]),t._v("可以看作是窗口管理器的命令行界面版本。它提供了统一的管理多个会话的界面和相应的功能。")])]),t._v(" "),e("p",[e("strong",[t._v("命令")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("yum install -y screen")]),t._v(" 安装")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("screen -S 会话名称")]),t._v(" 创建一个会话")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("screen -ls")]),t._v(" 列出所有的会话列表")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("screen -r 会话名称")]),t._v(" 恢复会话窗口")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("exit")]),t._v(" 关闭会话窗口")])])]),t._v(" "),e("p",[e("strong",[t._v("选项")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("-A")]),t._v(" 将所有的视窗都调整为目前终端机的大小。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-d")]),t._v(" <作业名称> 将指定的screen作业离线。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-h")]),t._v(" <行数> 指定视窗的缓冲区行数。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-m")]),t._v(" 即使目前已在作业中的screen作业，仍强制建立新的screen作业。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-r")]),t._v(" <作业名称> 恢复离线的screen作业。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-R")]),t._v(" 先试图恢复离线的作业。若找不到离线的作业，即建立新的screen作业。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-s")]),t._v(" 指定建立新视窗时，所要执行的shell。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-S")]),t._v(" <作业名称> 指定screen作业的名称。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-v")]),t._v(" 显示版本信息。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-x")]),t._v(" 恢复之前离线的screen作业。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-ls")]),t._v("或"),e("code",[t._v("--list")]),t._v(" 显示目前所有的screen作业。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-wipe")]),t._v(" 检查目前所有的screen作业，并删除已经无法使用的screen作业。")])])]),t._v(" "),e("p",[e("strong",[t._v("快捷键")])]),t._v(" "),e("blockquote",[e("p",[t._v("所有的快捷键都是先按一下"),e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("A")]),t._v("松开，这时快捷键生效再按其他按键")])]),t._v(" "),e("ul",[e("li",[e("p",[e("kbd",[t._v("D")]),t._v(" 隐藏并保留当前会话")])]),t._v(" "),e("li",[e("p",[e("kbd",[t._v("[")]),t._v("或"),e("kbd",[t._v("PgUp")]),t._v(" 进入"),e("code",[t._v("copy mode")]),t._v("，查看"),e("code",[t._v("Screen")]),t._v("中的终端输出记录")])])]),t._v(" "),e("blockquote",[e("p",[t._v("进入后它是"),e("code",[t._v("vi style keybindings")]),t._v("。对于拷贝文字，第一次空格设置开始标记，然后用"),e("kbd",[t._v("h")]),t._v("、"),e("kbd",[t._v("j")]),t._v("、"),e("kbd",[t._v("k")]),t._v("、\n"),e("kbd",[t._v("l")]),t._v("、"),e("kbd",[t._v("w")]),t._v("移动光标，第二次空格完成拷贝。粘贴用"),e("kbd",[t._v("]")])])]),t._v(" "),e("h3",{attrs:{id:"nohup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nohup"}},[t._v("#")]),t._v(" "),e("code",[t._v("nohup")])]),t._v(" "),e("blockquote",[e("p",[t._v("如果程序在其他目录下则在命令前加入"),e("code",[t._v("cd 目录路径 &&")])])]),t._v(" "),e("p",[e("strong",[t._v("只输出错误日志")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" python3 ./index.py "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v("index.log "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),e("p",[e("strong",[t._v("不输出日志")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" python3 ./index.py "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),e("p",[e("strong",[t._v("Linux的3种重定向")])]),t._v(" "),e("ol",[e("li",[e("p",[e("code",[t._v("0")]),t._v("表示标准输入")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("1")]),t._v("标准输出,在一般使用时，默认的是标准输出")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("2")]),t._v("标准错误信息输出")])])]),t._v(" "),e("blockquote",[e("p",[t._v("可以用来指定需要重定向的标准输入或输出。")]),t._v(" "),e("p",[t._v("将某个程序的错误信息输出到log文件中："),e("code",[t._v("./index 2>index.log")]),t._v("。")]),t._v(" "),e("p",[t._v("这样标准输出还是在屏幕上，但是错误信息会输出到log文件中。")]),t._v(" "),e("p",[t._v("另外，也可以实现0，1，2之间的重定向。"),e("code",[t._v("2>&1")]),t._v("：将错误信息重定向到标准输出。")])]),t._v(" "),e("p",[e("strong",[t._v("关于"),e("code",[t._v("/dev/null")]),t._v("文件")])]),t._v(" "),e("blockquote",[e("p",[t._v("Linux下还有一个特殊的文件"),e("code",[t._v("/dev/null")]),t._v("，它就像一个无底洞，所有重定向到它的信息都会消失得无影无踪。\n这一点非常有用，当我们不需要回显程序的所有信息时，就可以将输出重定向到"),e("code",[t._v("/dev/null")]),t._v("。")])]),t._v(" "),e("h3",{attrs:{id:"setsid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setsid"}},[t._v("#")]),t._v(" "),e("code",[t._v("setsid")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("setsid")]),t._v("就是"),e("code",[t._v("set session id")]),t._v("的意思。表示该命令运行的进程是一个新的"),e("code",[t._v("session")]),t._v("。因此其父进程不属于当前终端。\n实际上"),e("code",[t._v("setsid")]),t._v("运行的进程，其父进程id(ppid)为1(init进程的id)。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("setsid python3 ./index.py "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),e("p",[e("strong",[t._v("语法")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("setsid(选项)(参数)")])])]),t._v(" "),e("ol",[e("li",[e("p",[e("code",[t._v("-c")]),t._v(", "),e("code",[t._v("--ctty")]),t._v(" 将控制终端设置为当前控制终端")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-f")]),t._v(", "),e("code",[t._v("--fork")]),t._v(" 总是"),e("code",[t._v("fork")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("-w")]),t._v(", "),e("code",[t._v("--wait")]),t._v(" 等待程序退出，并使用相同的返回")])])]),t._v(" "),e("h3",{attrs:{id:"supervisor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#supervisor"}},[t._v("#")]),t._v(" "),e("code",[t._v("supervisor")])]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("supervisor")]),t._v("是用"),e("code",[t._v("Python")]),t._v("开发的一套通用的进程管理程序，能将一个普通的命令行进程变为后台"),e("code",[t._v("daemon")]),t._v("，并监控进程状态，异常退出时能自动重启。")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://supervisord.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://supervisord.org"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("strong",[t._v("常见配置如下")])]),t._v(" "),e("div",{staticClass:"language-vim extra-class"},[e("pre",{pre:!0,attrs:{class:"language-vim"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("program"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("程序名称"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nuser"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("root\ncommand"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("main\nstdout_logfile"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gf"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("stdout"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("log\nstderr_logfile"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gf"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("stderr"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("log\nautostart"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\nautorestart"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),e("p",[e("strong",[t._v("使用步骤")])]),t._v(" "),e("ol",[e("li",[e("p",[t._v("使用"),e("code",[t._v("sudo service supervisor start")]),t._v("启动"),e("code",[t._v("supervisor")]),t._v("服务；")])]),t._v(" "),e("li",[e("p",[t._v("创建应用配置文件"),e("code",[t._v("/etc/supervisor/conf.d/程序名称.conf")]),t._v(", 内容如上;")])]),t._v(" "),e("li",[e("p",[t._v("使用"),e("code",[t._v("sudo supervisorctl")]),t._v("进入"),e("code",[t._v("supervisor")]),t._v("管理终端；")])]),t._v(" "),e("li",[e("p",[t._v("使用"),e("code",[t._v("reload")]),t._v("重新读取配置文件并重启当前"),e("code",[t._v("supoervisor")]),t._v("管理的所有进程；")])]),t._v(" "),e("li",[e("p",[t._v("也可以使用"),e("code",[t._v("update")]),t._v("重新加载配置(默认不重启)，随后使用"),e("code",[t._v("start 程序名称")]),t._v("启动指定的应用程序；")])]),t._v(" "),e("li",[e("p",[t._v("随后可以使用"),e("code",[t._v("status")]),t._v("指令查看当前"),e("code",[t._v("supervisor")]),t._v("管理的进程状态；")])])]),t._v(" "),e("h2",{attrs:{id:"传输文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#传输文件"}},[t._v("#")]),t._v(" 传输文件")]),t._v(" "),e("blockquote",[e("p",[t._v("首先进入需要搭建web服务器的目录，然后在输入下面的命令，端口号默认"),e("code",[t._v("8000")])])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# python2.7")]),t._v("\npython -m SimpleHTTPServer port\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# python3.x")]),t._v("\npython -m http.server port\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务开启后，地址协议类型加IP/目录下的文件： ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" host:port/file 就可以下载了\n")])])]),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/schollz/croc",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/schollz/croc"),e("OutboundLink")],1)])]),t._v(" "),e("blockquote",[e("p",[t._v("号称"),e("code",[t._v("croc")]),t._v("通过压缩和多路复用比"),e("code",[t._v("wormhole")]),t._v("，"),e("code",[t._v("rsync")]),t._v("，"),e("code",[t._v("scp")]),t._v("更快（加速"),e("code",[t._v("1.5")]),t._v("倍至"),e("code",[t._v("4")]),t._v("倍）")])]),t._v(" "),e("h3",{attrs:{id:"scp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scp"}},[t._v("#")]),t._v(" scp")]),t._v(" "),e("blockquote",[e("p",[t._v("【优点】简单方便，安全可靠；支持限速参数，不占资源，不会提高多少系统负荷")]),t._v(" "),e("p",[t._v("【缺点】不支持排除目录")]),t._v(" "),e("p",[t._v("【用法】scp就是secure copy，是用来进行远程文件拷贝的。数据传输使用 ssh，并且和ssh 使用相同的认证方式，提供相同的安全保证 。")])]),t._v(" "),e("ul",[e("li",[t._v("示例")])]),t._v(" "),e("blockquote",[e("p",[t._v("把本地的source.txt文件拷贝到192.168.0.10机器上的/home/work目录下")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p /home/work/source.txt work@192.168.0.10:/home/work/\n")])])]),e("blockquote",[e("p",[t._v("把192.168.0.10机器上的source.txt文件拷贝到本地的/home/work目录下")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p work@192.168.0.10:/home/work/source.txt /home/work/\n")])])]),e("blockquote",[e("p",[t._v("把192.168.0.10机器上的source.txt文件拷贝到192.168.0.11机器的/home/work目录下")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p work@192.168.0.10:/home/work/source.txt work@192.168.0.11:/home/work/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拷贝文件夹，加-r参数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p -r /home/work/sourcedir work@192.168.0.10:/home/work/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用主机名")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p -r /home/work/sourcedir work@www.myhost.com:/home/work/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示详情，加-v参数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p -r -v /home/work/sourcedir work@www.myhost.com:/home/work/  \n")])])]),e("blockquote",[e("p",[t._v("将远程主机复制到本地")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -P "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -p root@192.168.214.187:/tmp/demo/f3.log /tmp/files/\n")])])]),e("p",[e("strong",[t._v("遇到的问题")])]),t._v(" "),e("blockquote",[e("p",[t._v("输入密码时提示："),e("code",[t._v("Permission denied, please try again.")])])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("先修改远程文件夹或文件的权限"),e("code",[t._v("chmod -R 777 路径")])])]),t._v(" "),e("li",[e("p",[t._v("修改"),e("code",[t._v("PermitRootLogin")]),t._v("允许Root登录")])])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编辑sshd_config文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/ssh/sshd_config\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 搜索PermitRootLogin并修改为yes")]),t._v("\n/PermitRootLogin\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启ssh")]),t._v("\n/etc/init.d/sshd restart\n")])])]),e("h3",{attrs:{id:"rsync"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rsync"}},[t._v("#")]),t._v(" rsync")]),t._v(" "),e("blockquote",[e("p",[t._v("【优点】功能强大，操作类似scp，支持排除目录，支持限速参数；还支持本地复制。")]),t._v(" "),e("p",[t._v("【缺点】会耗系统资源，占用I/O")]),t._v(" "),e("p",[t._v("【用法】rsync是类unix系统下的数据镜像备份工具，从软件的命名上就可以看出来了——remote sync。\n它的操作方式和scp和相似，但是比scp强大很多。使用双冒号分割主机名和文件路径时，是使用rsync服务器")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://rsync.samba.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://rsync.samba.org"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/axkibe/lsyncd",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/axkibe/lsyncd"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把本地的source.txt文件拷贝到192.168.0.10机器上的/home/work目录下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" /home/work/source.txt work@192.168.0.10:/home/work/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把192.168.0.10机器上的source.txt文件拷贝到本地的/home/work目录下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" work@192.168.0.10:/home/work/source.txt /home/work/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把192.168.0.10机器上的source.txt文件拷贝到192.168.0.11机器的/home/work目录下")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" work@192.168.0.10:/home/work/source.txt work@192.168.0.11:/home/work/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拷贝文件夹，加-r参数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -r /home/work/sourcedir work@192.168.0.10:/home/work/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用主机名")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -r /home/work/sourcedir work@www.myhost.com:/home/work/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示详情，加-v参数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -r -v /home/work/sourcedir work@www.myhost.com:/home/work/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 排除子目录，注意：--exclude后面的路径不能为绝对路径，必须为相对路径才可以，否则匹配不上，就不会被排除掉。")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -r -v --exclude sourcedir/notinclude /home/work/sourcedir work@www.myhost.com:/home/work/\n")])])]),e("h2",{attrs:{id:"性能测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能测试"}},[t._v("#")]),t._v(" 性能测试")]),t._v(" "),e("p",[e("strong",[t._v("bench.sh")])]),t._v(" "),e("blockquote",[e("p",[t._v("这个是秋水逸冰老大的脚本，用于测试网络下载及主机IO性能测试。是网络上普遍使用的脚本，界面很漂亮。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" -qO- bench.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),e("p",[e("strong",[t._v("91yun")])]),t._v(" "),e("blockquote",[e("p",[t._v("这个来自91yun的脚本，主要测试的是网络ping值及路由。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" -N --no-check-certificate https://raw.githubusercontent.com/91yun/91yuntest/master/test_91yun.sh "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" test_91yun.sh s\n")])])]),e("p",[e("strong",[t._v("主机运算性能测试")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" --no-check-certificate https://github.com/teddysun/across/raw/master/unixbench.sh "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x unixbench.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" unixbench.sh\n")])])]),e("p",[e("strong",[t._v("服务器一键测试脚本")])]),t._v(" "),e("blockquote",[e("p",[t._v("可以一键检测服务器基本性能，以及网络去程回程的速度。代码整合来自"),e("code",[t._v("SpeedTest")]),t._v("和"),e("code",[t._v("OldKing")]),t._v("的"),e("code",[t._v("SuperSpeed")]),t._v("。")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 中文版")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://raw.githubusercontent.com/FunctionClub/ZBench/master/ZBench-CN.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ZBench-CN.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 英文版")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://raw.githubusercontent.com/FunctionClub/ZBench/master/ZBench.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" ZBench.sh\n")])])]),e("blockquote",[e("p",[t._v("测试完之后，会在/root/下面生成一个 report.html 的文件。")])]),t._v(" "),e("p",[e("strong",[t._v("Superspeed.sh")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/oooldking/script",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/oooldking/script"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://raw.githubusercontent.com/oooldking/script/master/superspeed.sh "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x superspeed.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" superspeed.sh\n")])])]),e("h2",{attrs:{id:"网卡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网卡"}},[t._v("#")]),t._v(" 网卡")]),t._v(" "),e("h3",{attrs:{id:"mtu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mtu"}},[t._v("#")]),t._v(" MTU")]),t._v(" "),e("blockquote",[e("p",[t._v("MTU经过网卡传输的数据包的最大传输单元,传输设备的MTU值不规范造成传输失败的情况")])]),t._v(" "),e("p",[e("strong",[t._v("查看MTU值")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /sys/class/net/eth0/mtu\n")])])]),e("p",[e("strong",[t._v("临时更改MTU值")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1476"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /sys/class/net/eth0/mtu\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ifconfig 网口名 mtu 数值")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v(" eth0 mtu "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1476")]),t._v("\n")])])]),e("p",[e("strong",[t._v("永久更改MTU值")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/sysconfig/network-scripts/ifcfg-eth0\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在DEVICE=eth0下面加入")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MTU")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1476")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启用IPv6地址的，修改IPv6 mtu的参数为")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IPV6_MTU")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1280"')]),t._v("\n")])])]),e("p",[e("strong",[t._v("重启网络接口")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" network restart\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);