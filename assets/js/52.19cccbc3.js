(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{635:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql配置"}},[s._v("#")]),s._v(" MySQL配置")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#配置my-cnf"}},[s._v("配置my.cnf")])]),a("li",[a("a",{attrs:{href:"#yum安装配置"}},[s._v("yum安装配置")])]),a("li",[a("a",{attrs:{href:"#宝塔面板安装配置"}},[s._v("宝塔面板安装配置")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"配置my-cnf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置my-cnf"}},[s._v("#")]),s._v(" 配置my.cnf")]),s._v(" "),a("blockquote",[a("p",[s._v("从5.7.17后mysql就没有默认的my_default.cnf文件，需要手动创建")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/my.cnf\n")])])]),a("blockquote",[a("p",[s._v("按"),a("code",[s._v("i")]),s._v("后输入以下内容")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sql_mode = NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一般配置选项")]),s._v("\nbasedir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/\ndatadir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\nport "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\ncharacter-set-server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8\nexplicit_defaults_for_timestamp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# socket = /var/run/mysqld/mysqld.sock")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0：区分大小写，1：不区分大小写")]),s._v("\nlower_case_table_names "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下面是可选项，要不要都行，如果出现启动错误，则全部注释掉，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保留最基本的配置选项，然后尝试添加某些配置项后启动，检测配置项是否有误")]),s._v("\nback_log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\nmax_connections "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\nmax_connect_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\ntable_open_cache "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nmax_allowed_packet "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog_cache_size = 4M")]),s._v("\n\nmax_heap_table_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\nread_rnd_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nsort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\njoin_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nthread_cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nquery_cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\nquery_cache_limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 4M\nft_min_word_len "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认开启事件调度器ON或者是1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event_scheduler")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\nthread_stack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是REPEATABLE-READ，改成读已提交")]),s._v("\ntransaction-isolation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("READ-COMMITTED\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久设置手动提交事务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autocommit=0")]),s._v("\ntmp_table_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log-bin=mysql-bin")]),s._v("\nlong_query_time "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server_id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\ninnodb_buffer_pool_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 1G\ninnodb_thread_concurrency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\ninnodb_log_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\n\ninnodb_log_file_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512M\ninnodb_log_files_in_group "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ninnodb_max_dirty_pages_pct "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\ninnodb_lock_wait_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\ninnodb_file_per_table "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" on\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nquick\nmax_allowed_packet "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nno-auto-rehash\ndefault-character-set"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\nsafe-updates\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkey_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nsort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nread_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\nwrite_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlhotcopy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninteractive-timeout\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld_safe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nopen-files-limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"yum安装配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum安装配置"}},[s._v("#")]),s._v(" yum安装配置")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#password   = your_password")]),s._v("\nport        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql/mysql.sock\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nport        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql/mysql.sock\ndatadir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\nsymbolic-links"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nlog-error"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/log/mysqld.log\npid-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/mysqld/mysqld.pid\nskip-external-locking\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("performance_schema_max_table_instances")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("table_definition_cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\nkey_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nmax_allowed_packet "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 100G\ntable_open_cache "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\nsort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nnet_buffer_length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8K\nread_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_rnd_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\nmyisam_sort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\nthread_cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nquery_cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ntmp_table_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsql-mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n\nexplicit_defaults_for_timestamp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#skip-networking")]),s._v("\nmax_connections "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\nmax_connect_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nopen_files_limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0：区分大小写，1：不区分大小写")]),s._v("\nlower_case_table_names "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认开启事件调度器ON或者是1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event_scheduler")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\n\nthread_stack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是REPEATABLE-READ，改成读已提交")]),s._v("\ntransaction-isolation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("READ-COMMITTED\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久设置手动提交事务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autocommit=0")]),s._v("\ntmp_table_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\nlog-bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binlog_format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixed\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库ID号,为1时表示为Master,其中master_id必须为1到232–1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之间的一个正整数值，主从server-id不能一样;")]),s._v("\nserver-id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自动删除5天前的日志。默认值为0，表示从不删除。")]),s._v("\nexpire_logs_days "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slow_query_log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nslow-query-log-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/mysql/mysql-slow.log\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("long_query_time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log_queries_not_using_indexes=on")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.11拥有，默认值为keyring_file，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# InnoDB表空间在初始化InnoDB之前需要此插件来加密，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.12及以后此参数默认为空")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#early-plugin-load = ""')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-trx=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-locks=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-lock-waits=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index-reset=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-reset=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem-reset=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page-lru=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-pool-stats=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-metrics=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-default-stopword=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-inserted=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-deleted=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-being-deleted=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-config=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-cache=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-table=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tables=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tablestats=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-indexes=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-columns=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-fields=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign-cols=0")]),s._v("\n\ndefault_storage_engine "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" InnoDB\ninnodb_data_home_dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\ninnodb_data_file_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ibdata1:10M:autoextend\ninnodb_log_group_home_dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\ninnodb_buffer_pool_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\ninnodb_log_file_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 64M\ninnodb_log_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ninnodb_flush_log_at_trx_commit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ninnodb_lock_wait_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\ninnodb_max_dirty_pages_pct "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\ninnodb_read_io_threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ninnodb_write_io_threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nquick\nmax_allowed_packet "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nno-auto-rehash\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkey_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\nwrite_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlhotcopy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninteractive-timeout\n")])])]),a("h2",{attrs:{id:"宝塔面板安装配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#宝塔面板安装配置"}},[s._v("#")]),s._v(" 宝塔面板安装配置")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#password   = your_password")]),s._v("\nport        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /tmp/mysql.sock\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nport        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /tmp/mysql.sock\ndatadir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\nskip-external-locking\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("performance_schema_max_table_instances")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("table_definition_cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\nkey_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nmax_allowed_packet "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 100G\ntable_open_cache "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\nsort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nnet_buffer_length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8K\nread_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_rnd_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\nmyisam_sort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\nthread_cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nquery_cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ntmp_table_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsql-mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n\nexplicit_defaults_for_timestamp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#skip-networking")]),s._v("\nmax_connections "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\nmax_connect_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nopen_files_limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0：区分大小写，1：不区分大小写")]),s._v("\nlower_case_table_names "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认开启事件调度器ON或者是1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event_scheduler")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\n\nthread_stack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是REPEATABLE-READ，改成读已提交")]),s._v("\ntransaction-isolation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("READ-COMMITTED\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久设置手动提交事务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autocommit=0")]),s._v("\ntmp_table_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\nlog-bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binlog_format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixed\nserver-id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自动删除5天前的日志。默认值为0，表示从不删除。")]),s._v("\nexpire_logs_days "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slow_query_log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nslow-query-log-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data/mysql-slow.log\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("long_query_time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log_queries_not_using_indexes=on")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.11拥有，默认值为keyring_file，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# InnoDB表空间在初始化InnoDB之前需要此插件来加密，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.12及以后此参数默认为空")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#early-plugin-load = ""')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-trx=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-locks=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-lock-waits=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index-reset=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-reset=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem-reset=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page-lru=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-pool-stats=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-metrics=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-default-stopword=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-inserted=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-deleted=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-being-deleted=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-config=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-cache=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-table=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tables=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tablestats=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-indexes=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-columns=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-fields=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign=0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign-cols=0")]),s._v("\n\ndefault_storage_engine "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" InnoDB\ninnodb_data_home_dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\ninnodb_data_file_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ibdata1:10M:autoextend\ninnodb_log_group_home_dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\ninnodb_buffer_pool_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\ninnodb_log_file_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 64M\ninnodb_log_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ninnodb_flush_log_at_trx_commit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ninnodb_lock_wait_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\ninnodb_max_dirty_pages_pct "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\ninnodb_read_io_threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ninnodb_write_io_threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nquick\nmax_allowed_packet "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nno-auto-rehash\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkey_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsort_buffer_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\nwrite_buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlhotcopy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninteractive-timeout\n")])])]),a("blockquote",[a("p",[s._v("按"),a("code",[s._v("ESC")]),s._v("后输入"),a("code",[s._v(":wq")]),s._v("退出")])]),s._v(" "),a("h1",{attrs:{id:"返回顶部"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回顶部"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#readme"}},[s._v("返回顶部")])])])}),[],!1,null,null,null);t.default=e.exports}}]);